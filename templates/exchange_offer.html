<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>Мои предложения обмена</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1, h2 { color: #333; }
        ul { list-style: none; padding-left: 0; }
        li { margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        button { margin-right: 10px; padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; }
        button.accept { background-color: #4CAF50; color: white; }
        button.reject { background-color: #e74c3c; color: white; }
        .status { font-weight: bold; }
    </style>
</head>
<body>
    <h1>Мои предложения обмена</h1>

    <h2>Вы отправили:</h2>
    <ul>
        {% for offer in sent_offers %}
            <li>
                Ваше объявление: <strong>{{ offer.ad_sender_id.title }}</strong><br>
                Предложено за: <strong>{{ offer.ad_receiver_id.title }}</strong><br>
                Статус: <span class="status">{{ offer.get_status_display }}</span><br>
                Комментарий: {{ offer.comment }}
            </li>
        {% empty %}
            <li>Вы пока не отправляли предложений.</li>
        {% endfor %}
    </ul>

    <h2>Вам предложили:</h2>
    <ul>
        {% for offer in received_offers %}
            <li>
                Вам предложили <strong>{{ offer.ad_sender_id.title }}</strong>
                за ваше <strong>{{ offer.ad_receiver_id.title }}</strong><br>
                Статус: <span class="status">{{ offer.get_status_display }}</span><br>
                Комментарий: {{ offer.comment }}<br>

                {% if offer.status == 'pending' %}
                    <form method="post" action="{% url 'respond_offer' offer.offer_id %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" name="action" value="accept" class="accept">Принять</button>
                    </form>
                    <form method="post" action="{% url 'respond_offer' offer.offer_id %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" name="action" value="reject" class="reject">Отклонить</button>
                    </form>
                {% endif %}
            </li>
        {% empty %}
            <li>Вам пока не поступало предложений.</li>
        {% endfor %}
    </ul>

    <!-- Опционально: добавьте флеш-сообщения, если используете messages -->
    {% if messages %}
      <ul>
        {% for message in messages %}
          <li style="color: {% if message.tags == 'error' %}red{% else %}green{% endif %};">
            {{ message }}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
</body>
</html>
